<!DOCTYPE html><html lang="ru"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Instagram API | WebReference</title><meta charset="utf-8" /><link rel="next" href="view.html" /><link rel="prev" href="setup.html" /><meta name="description" content="Чтобы использовать Instagram API, мы должны бесплатно зарегистрироваться как разработчики Instagram. Основные вещи, которые нам нужны для этого приложения — client_id и client_secret. Мы можем взять их после создания аккаунта и регистрации нового приложения." /><link rel="stylesheet" href="../../../assets/css/css_-FSXTEApofvZ1FwxICRGF2JtLJ1PW5ZzPome35sOLp0.css" media="screen" /></head><body><header><div class="grid-container"><div class="grid-x align-middle"><div class="cell logo small-12 medium-12 large-6"><a href="../../../index.html"><span class="t1">Web</span><span class="t2">Reference</span></a></div><div class="cell small-12 medium-12 large-6"><form action="https://webref.ru/search/" id="cse-search-box"><div class="input-group"><div class="input-group-field"><input type="search" placeholder="Поиск по сайту" name="s" autocomplete="off" id="cse-search-input"><input type="hidden" name="cx" value="partner-pub-0708135098984815:9970767379"><input type="hidden" name="cof" value="FORID:10"><input type="hidden" name="ie" value="UTF-8"></div><div class="input-group-button"><button class="button"><i class="icon-search"></i></button></div></div></form></div></div></div><nav id="navMenu" class="navbar"><div class="grid-container"><ul class="menu"><li><a href="../../../index.html">Главная</a></li><li class="dropdown"><span>Справочники</span><ul><li><a href="../../../html.html">HTML</a></li><li><a href="../../../css.html">CSS</a></li></ul></li><li class="dropdown"><span>Руководства</span><ul><li><a href="../../../layout.html">Вёрстка</a></li><li><a href="../../../dev.html">Веб-технологии</a></li><li><a href="../../../mobile.html">Мобильные приложения</a></li></ul></li><li><a href="../../../recipe.html">Рецепты</a></li><li><a href="../../../course.html">Курсы</a></li><li><a href="../../../practice.html">Практика</a></li><li><a href="../../../individual.html">Самостоятельная</a></li><li><a href="../../../quiz.html">Тесты</a></li></ul></div></nav></header><main><div class="grid-container breadcrumb"><section class="region region-crumbs"><div id="easy_breadcrumb-easy_breadcrumb" class="block"><div class="block_content"><div itemscope class="easy-breadcrumb" itemtype="http://data-vocabulary.org/Breadcrumb"> <span itemprop="title"><a href="../../../index.html" class="easy-breadcrumb_segment easy-breadcrumb_segment-front">Главная</a></span> <span class="easy-breadcrumb_segment-separator"></span> <span itemprop="title"><a href="../../../dev.html" class="easy-breadcrumb_segment easy-breadcrumb_segment-1">Веб-технологии</a></span> <span class="easy-breadcrumb_segment-separator"></span> <span itemprop="title"><a href="../../first-node-app.html" class="easy-breadcrumb_segment easy-breadcrumb_segment-2">Создание первого приложения на Node</a></span> <span class="easy-breadcrumb_segment-separator"></span> <span itemprop="title"><a href="../app.html" class="easy-breadcrumb_segment easy-breadcrumb_segment-3">Наше первое Node-приложение</a></span> <span class="easy-breadcrumb_segment-separator"></span> <span class="easy-breadcrumb_segment easy-breadcrumb_segment-title" itemprop="title">Instagram API</span></div></div></div></section></div><div class="grid-container"><div class="grid-x grid-margin-x"><div class="cell medium-12 large-9 content-section"><div class="title"><h1>Instagram API</h1></div><div id="example-form"></div><section class="region region-content"><div id="system-main" class="block"><div class="block_content"><p>Чтобы использовать Instagram API, мы должны бесплатно зарегистрироваться как разработчики Instagram. Основные вещи, которые нам нужны для этого приложения&nbsp;— <strong>client_id</strong> и <strong>client_secret</strong>. Мы можем взять их после создания аккаунта и регистрации нового приложения.</p><p>Использование <strong>client_id</strong> и <strong>client_secret</strong> один из вариантов взятия данных из Instagram API. Другой&nbsp;— это позволить пользователям вашего приложения проводить аутентификацию, используя учетную запись пользователя. Пакет instagram-node содержит возможности для этого, но подобная задача выходит за рамки нашего руководства.</p><div id="block-17" class="block"><div class="block_content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-0708135098984815" data-ad-slot="1723360345"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><p>Мы можем сделать всё быстро на сайте <a href="https://instagram.com/developer/">Instagram Developer</a>.</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-2.png" alt=""></p><p>Перейдите на сайт и залогиньтесь.</p><p>Теперь перейдём к созданию нашего нового клиента (или приложения).</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-3.png" alt=""></p><p>После создания нашего клиента мы получим <strong>client_id</strong> и <strong>client_secret</strong>.</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-4.png" alt=""></p><p>Это именно то, что нам нужно для получения доступа к Instagram API через наше Node-приложение.</p><h2>Анализ Instagram API</h2><p>Давайте отвлечёмся на минуту и посмотрим через API на информацию, которую мы можем получить. Часто компании предоставляют анализатор API, так что вы можете использовать удобный интерфейс и увидеть данные JSON, которые придут из API. Парой крупных компаний, которые предлагают анализаторы API являются <a href="https://developers.facebook.com/tools/explorer/145634995501895/?method=GET">Facebook</a> и <a href="https://dev.twitter.com/rest/tools/console">Twitter</a>.</p><p>Instagram API также предлагает анализатор через сервис под названием <a href="http://apigee.com/about/">Apigee</a>. Мы можем получить к нему доступ из <a href="https://instagram.com/developer/api-console/">панели управления Instagram</a> и через <a href="https://apigee.com/console/instagram">Apigee Instagram API Explorer</a>.</p><p>После открытия анализатора API он на первый взгляд может показаться немного сложным. В левой панели мы можем увидеть все вызовы API. Нам нужно только обратить внимание на вызов GET media/popular.</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-5.png" alt="" width="410" height="677"></p><p>Если мы щёлкнем на вызове media/popular и добавим client_id пользователя в URL вроде такого:</p><p>https://api.instagram.com/v1/media/popular?client_id=e0e51c60672c4f09abe28c46c71a3a7a</p><p>то сможем увидеть, что API вернул важные изображения.</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-6.png" alt=""></p><p>При ближайшем рассмотрении видим, что получаем массив изображений с именем <span class="var">data</span>.</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-7.png" alt=""></p><p>Если мы взглянем на отдельный объект в массиве <span class="var">data</span>, то увидим, что он является одной фотографией со всей нужной нам информацией.</p><p class="fig"><img src="../../../assets/images/first-node-app/app3-8.png" alt=""></p><p>Мы можем получить информацию из <span class="var">comments</span>, <span class="var">likes</span>, <span class="var">images</span> и <span class="var">user</span>. Мы собираемся использовать их при создании нашего приложения. У нас есть всё необходимое:</p><ul><li>client_id;</li><li>client_secret;</li><li>понимание данных API.</li></ul><p>Давайте двинемся дальше и получим эти данные в нашем приложении и покажем их пользователям.</p><h2>Условия и правила Instagram API</h2><p>Я призываю вас всегда читать <a href="http://instagram.com/about/legal/terms/api/">условия и правила API</a> перед использованием. Есть истории приложений, которые выросли успешными из-за того, что их доступ к API сбежал от них, потому что они нарушили условия.</p><p>Основные моменты в правилах Instagram.</p><ul><li>Нельзя заменять или повторять instagram.com или приложения Instagram.</li><li>Нельзя показывать более 30 одновременно.</li><li>Нельзя участвовать в любой программе обмена «лайками», «поделиться», «комментариями» или «фолловерами».</li></ul><p>Большинство из этих правил довольно стандартны при использовании API. Создатель API хочет гарантировать, что его пользователей не забомят рекламой, спамом или фейковыми пользователями. Это помогает сохранить сообщество на высоком уровне культуры.</p><p>Итак, если мы не можем повторить сайт или приложение, какой смысл в работе с их API? Это хороший вопрос. Пока Instagram, кажется, довольно мягок с этими правилами, поскольку есть сайты и приложения, которые довольно близко повторяют основные функции. Также есть очень аккуратные приложения, вроде <a href="http://printstagr.am">printstagram</a>, которое позволит вам печатать квадратные изображения.</p><h2>instagram-node</h2><p>Вернёмся к нашему приложению; нам нужно будет настроить instagram-node. Давайте добавим эту строку в раздел конфигурации нашего файла server.js:</p>
<pre><code data-language="javascript">// КОНФИГУРАЦИЯ ПРИЛОЖЕНИЯ
// ==================================================

...

// настройка приложения с client_id
ig.use({ 
  client_id: 'e0e51c60672c4f09abe28c46c71a3a7a',
  client_secret: 'db11c575a8ae4f1aa90a03ba1d1345d8' 
});</code>

...</pre>
<p>Мы заполнили учётные данные клиента, вы можете свободно передавать их, пакет instagram-node обработает всё остальное. Мы не должны беспокоиться о добавлении <span class="var">client_id</span> к любому URL, как это делали в анализе API.</p><p>Пакет также упрощает вызовы API для использования. Список вызовов API можно найти в <a href="https://github.com/totemstech/instagram-node#using-the-api">документации</a>. Вызов, который нам нужен для популярных картинок следующий:</p>
<pre><code data-language="javascript">ig.media_popular(function(err, medias, remaining, limit) {});</code></pre>
<p>Мы будем использовать этот вызов, чтобы передать <span class="var">medias</span> в наше представление.</p><section class="grid-container credit"><div class="grid-x grid-margin-x"><h2 class="element-invisible">Автор и редакторы</h2><div class="cell small-6 credit-author"><i class="icon-user"></i> Автор: Крис Севилеха</div><div class="cell small-6 credit-changed"><i class="icon-calendar"></i> Последнее изменение: 20.09.2015</div><div class="cell small-12 credit-editor"><i class="icon-users"></i> Редакторы: Клим Щербаков</div></div></section><script src="../../../sites/all/themes/ori/js/mousetrap.min.js"></script><script>Mousetrap.bind('mod+left',function(){document.location='/dev/first-node-app/app/setup';});Mousetrap.bind('mod+right',function(){document.location='/dev/first-node-app/app/view';});</script><div class="grid-container book-navigation" id="book-navigation-bottom"><div class="grid-x grid-margin-x"><div class="cell small-6 page-previous"><a href="setup.html" title="На предыдущую страницу">Настройка приложения</a><br><span class="navigation-tooltip"><kbd>Ctrl</kbd>+<kbd>←</kbd></span></div><div class="cell small-6 page-next"><a href="view.html" title="На следующую страницу">Получение данных в HTML</a><br><span class="navigation-tooltip"><kbd>Ctrl</kbd>+<kbd>→</kbd></span></div></div></div><div id="block-20" class="block"><div class="block_content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-0708135098984815" data-ad-slot="1599783371" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div id="block-10" class="block"><div class="block_content"><div id="disqus_thread"></div><script>var disqus_shortname="webref";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src="//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script></div></div></div></div></section></div><aside class="cell medium-12 large-3 sidebar-section"><section class="region region-sidebar-toc"><div id="book-navigation" class="block"><h2 class="block_title">Содержание</h2><div class="block_content"><ul class="menu"><li class="first leaf"><a href="../install.html">Установка Node</a></li><li class="leaf"><a href="../simple.html">Очень простое Node-приложение</a></li><li class="leaf"><a href="../http-server.html">Запуск HTTP-сервера и выдача HTML-файла</a></li><li class="last expanded active-trail"><a href="../app.html" class="active-trail">Наше первое Node-приложение</a><ul class="menu"><li class="first leaf"><a href="setup.html">Настройка приложения</a></li><li class="leaf active-trail"><a href="instagram-api.html" class="active-trail active">Instagram API</a></li><li class="last leaf"><a href="view.html">Получение данных в HTML</a></li></ul></li></ul></div></div><div id="block-12" class="block"><div class="block_content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:240px;height:400px" data-ad-client="ca-pub-0708135098984815" data-ad-slot="6456026170"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div></section></aside></div></div></main><footer><div class="footer-top"><div class="grid-container"><div class="grid-x grid-margin-x"><div class="cell small-12 large-3"><p class="logo"><span>Web</span><span class="t2">Reference</span></p><p>Гл. редактор: Влад Мержевич</p><address>vlad@webref.ru</address></div><section class="cell small-12 large-8"><h3>О сайте</h3><p>На сайте находятся справочники и учебные курсы по различным веб-технологиям, а также руководства по вёрстке веб-страниц и разработке мобильных приложений.</p></section><div class="cell hide-for-small large-1 counter"><script src="../../../sites/all/themes/v3/js/li.js"></script></div></div></div></div><div class="footer-bottom"><div class="grid-container"><div class="grid-x grid-margin-x"><section class="cell small-6 large-3"><h3>Связи</h3><ul id="community"><li><i class="icon-rss"></i> <a href="https://feeds.feedburner.com/webref" rel="nofollow">RSS</a></li><li><i class="icon-jsfiddle"></i> <a href="https://jsfiddle.net/user/webref/fiddles/" rel="nofollow">JSFiddle</a></li><li><i class="icon-github"></i> <a href="https://github.com/webref" rel="nofollow">GitHub</a></li><li><i class="icon-vk"></i> <a href="https://vk.com/webref" rel="nofollow">ВКонтакте</a></li><li><i class="icon-doc-text"></i> <a href="https://drive.google.com/folderview?id=0B4u62HGG7TOnTVJ4aFlFa1Jpb2M" rel="nofollow">Google Диск</a></li><li><i class="icon-users"></i> <a href="https://htmlforum.io/" rel="nofollow">Форум</a></li></ul></section><section class="cell small-6 large-3"><h3>Разделы сайта</h3><ul id="footer-menu" class="links"><li><i class="icon-book"></i> <a href="../../../ref.html">Справочники</a></li><li><i class="icon-layout"></i> <a href="../../../layout.html">Вёрстка</a></li><li><i class="icon-gear"></i> <a href="../../../dev.html">Веб-технологии</a></li><li><i class="icon-mobile"></i> <a href="../../../mobile.html">Мобильные приложения</a></li><li><i class="icon-help"></i> <a href="../../../recipe.html">Рецепты</a></li><li><i class="icon-bookmark"></i> <a href="../../../course.html">Учебные курсы</a></li><li><i class="icon-pencil"></i> <a href="../../../practice.html">Практика</a></li><li><i class="icon-css3"></i> <a href="../../../individual.html">Самостоятельная</a></li><li><i class="icon-help"></i> <a href="../../../quiz.html">Тесты</a></li></ul></section><section class="cell small-6 large-3"><h3>Популярное</h3><section class="region region-popular"><div id="views-popular-popular" class="block"><div class="block_content"><div class="view view-popular view-id-popular view-display-id-popular view-dom-id-ad7818eb5ca2bb35e217869fadd15c5a"><div class="view-content"><ul><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/html5.svg.png" src="../../../assets/images/thumb/html5.svg" width="16" height="16" alt="" /> <a href="../../../layout/learn-html-css.html">Уроки по HTML и CSS</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/html5.svg.png" src="../../../assets/images/thumb/html5.svg" width="16" height="16" alt="" /> <a href="../../../layout/howtocodeinhtml.html">Как верстать на HTML5 и CSS3</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/html5.svg.png" src="../../../assets/images/thumb/html5.svg" width="16" height="16" alt="" /> <a href="../../../layout/html5-css3.html">HTML5 и CSS3 на примерах</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/css3.svg.png" src="../../../assets/images/thumb/css3.svg" width="16" height="16" alt="" /> <a href="../../../layout/magic-of-css.html">Магия CSS</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/jquery.svg.png" src="../../../assets/images/thumb/jquery.svg" width="16" height="16" alt="" /> <a href="../../jqfundamentals.html">Основы jQuery</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/js.svg.png" src="../../../assets/images/thumb/js.svg" width="16" height="16" alt="" /> <a href="../../learn-javascript.html">Знакомство с JavaScript</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/bootstrap.svg.png" src="../../../assets/images/thumb/bootstrap.svg" width="16" height="16" alt="" /> <a href="../../../layout/bootstrap.html">Bootstrap</a></li><li class="leaf"> <img class="svg-img size-icon" data-src="/assets/svgimg/icon/img-styles/images/thumb/gulp.svg.png" src="../../../assets/images/thumb/gulp.svg" width="16" height="16" alt="" /> <a href="../../automate-with-gulp.html">Автоматизация работы с Gulp</a></li></ul></div></div></div></div></section></section><section class="cell small-6 large-3"><h3>Помощь по сайту</h3><ul><li><a href="../../../author.html">Авторы</a></li><li><a href="../../../help/legend.html">Обозначения</a></li><li><a href="../../../help/term.html">Терминология</a></li><li><a href="../../../help/slang.html" title="">Жаргон</a></li><li><a href="../../../help/app.html" title="">Наши приложения</a></li><li><a href="../../../help/download.html" title="">Скачать</a></li></ul></section></div></div></div><div class="copyright"><div class="grid-container"><div class="grid-x align-middle"><div class="cell small-12 medium-2 large-1"><a href="http://creativecommons.org/licenses/by-nc/4.0/deed.ru" rel="nofollow"><img alt="Лицензия Creative Commons" src="../../../sites/all/themes/v3/img/cc.png" width="88" height="31"></a></div><div class="cell small-12 medium-10 large-11">Все материалы сайта доступны по <a href="http://creativecommons.org/licenses/by-nc/4.0/deed.ru" rel="nofollow">лицензии Creative Commons «Attribution-NonCommercial» («Атрибуция — Некоммерческое использование») 4.0 Всемирная</a>, если не указано иное.</div></div></div></div></footer><script src="../../../sites/all/themes/v3/js/ads.js"></script><script>window.google_analytics_uacct="UA-88593016-2";</script><script src="../../../assets/js/js_II2ib-sdAYUJkLc_BSmoT9CvFgkQHjbX6ZwWkuMJpi0.js"></script><script src="../../../assets/js/js_H7q2xORKmR9AN8Qx5spKEIBp7R_wG2apAswJoCUZY7I.js"></script><script src="../../../assets/js/js_ugJmGmW_zO124nItiV-hF5EGZnqY8ON-Eh9qKRmh3VQ.js"></script><script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-88593016-2",{"cookieDomain":"auto"});ga("set","anonymizeIp",true);ga("send","pageview");</script><script src="../../../assets/js/js_b8aWPOnPHDVS7UxsbF3r192VwrZUv_iQK2bBEwdOjzM.js"></script><script>jQuery.extend(Drupal.settings,{"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"v3","theme_token":"Ybog6TunLHv_l6bRwOyFD7xpAQUO2tf7r02yjBk0eYY","js":{"modules\/statistics\/statistics.js":1,"0":1,"sites\/all\/modules\/jquery_update\/replace\/jquery\/3.1\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"public:\/\/languages\/ru_eQ6_MlK9JXj_doTDHktg3qRCVZqnXcvZ7gDAljGIQ34.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"1":1,"sites\/all\/themes\/v3\/js\/foundation.min.js":1,"sites\/all\/themes\/v3\/js\/vendor\/rainbow.min.js":1,"sites\/all\/themes\/v3\/js\/vendor\/scrollTo.min.js":1,"sites\/all\/themes\/v3\/js\/vendor\/autocomplete.min.js":1,"sites\/all\/themes\/v3\/js\/vendor\/sticky.min.js":1,"sites\/all\/themes\/v3\/js\/vendor\/slick\/slick.min.js":1,"sites\/all\/themes\/v3\/js\/app.min.js":1,"sites\/all\/themes\/v3\/js\/adblock.js":1},"css":{"sites\/all\/themes\/v3\/css\/foundation.min.css":1,"sites\/all\/themes\/v3\/css\/style.min.css":1,"sites\/all\/themes\/v3\/js\/vendor\/slick\/slick.min.css":1}},"googleanalytics":{"trackOutbound":1},"statistics":{"data":{"nid":"1082"},"url":"\/modules\/statistics\/statistics.php"}});</script></body></html>